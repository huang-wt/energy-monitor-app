\hypertarget{power_8h_source}{}\doxysection{power.\+h}
\label{power_8h_source}\index{src/power.h@{src/power.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ POWER\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ POWER\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{using\ }std::string;}
\DoxyCodeLine{00009\ \textcolor{keyword}{using\ }std::vector;}
\DoxyCodeLine{00010\ \textcolor{keyword}{using\ }std::map;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPower}{Power}}\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPower}{Power}}();}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPower_a04553d70a7de54e2e578d78951840fb9}{CurrHourEnergyUsage}}();}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPower_ad617abfa1ba104294f1684d63fdcef31}{CurrPowerUsage}}();}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPower_a871246e16dff227b9d8a0a00729fd7e2}{TotalEnergyUsage}}();}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ vector<double>\ \mbox{\hyperlink{classPower_af2795e0554b26deff9492d89bb9c080d}{HoursEnergyUsages}}();}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classPower_af2795e0554b26deff9492d89bb9c080d}{HoursEnergyUsages}}(\textcolor{keywordtype}{int}\ hour);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPower_afd7be51c2bbb29b0d9d2bf407beacb0b}{ResetLogVector}}();}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPower_aabb5e8d2b1872b8d91e435a6b3defbb8}{SetLogVector}}(vector<double>\ datas);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPower_af2efc1d7ddd876c87102ca6b37509d46}{UpdateLogVector}}(\textcolor{keywordtype}{int}\ hour);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ map<string,\ double>\ \mbox{\hyperlink{classPower_a8d6c0c77848b563b171578fece31b5b3}{LastNDaysEnergyUsage}}(vector<string>\ rows,\ \textcolor{keywordtype}{int}\ n);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPower_a53e52a6ad4204328e5652baf4f7fea7a}{UpdatePrevHoursEnergy}}();}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPower_aab5aca5a26a1fe53cdc739d5c152fbd5}{SetExtra}}(\textcolor{keywordtype}{double}\ value);}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classPower_a82971c5a5461a57e5d58b5664de66d7d}{UpdatePowerAndEnergyUsage}}();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ EnergyUsageInUj();}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ energy\_usage\_path\ =\ \textcolor{stringliteral}{"{}/sys/class/powercap/intel-\/rapl/intel-\/rapl:1/energy\_uj"{}};}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ mex\_energy\_path\ =\ \textcolor{stringliteral}{"{}/sys/class/powercap/intel-\/rapl/intel-\/rapl:1/max\_energy\_range\_uj"{}};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ energy\ amount\ got\ from\ the\ system\ will}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reset\ to\ zero\ when\ it\ exceeds\ this\ bound}}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ max\_energy;}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Record\ energy\ usages\ in\ every\ hour\ in\ a\ day}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ vector<double>\ hours\_energy\_usages;}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ curr\_hour\_energy\_usage\ =\ 0;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ total\_energy\_usage;}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ curr\_power\_usage\ =\ 0;}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ total\ energy\ usage\ (in\ uj)\ in\ the\ previous\ hours\ }}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ since\ the\ pc\ boots}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ prev\_hours\_energy\ =\ 0;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ total\ energy\ usage\ since\ the\ pc\ boots}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ accum\_energy\_usage\ =\ 0;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ current\ energy\ amount\ extracted\ from\ the\ system}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ energy\ =\ 0;}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ energy\ amount\ extracted\ in\ the\ last\ logging\ time}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ prev\_energy\ =\ 0;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ number\ of\ times\ when\ the\ capped\ energy\ amount\ }}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ reached}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ capped\_times\ =\ 0;}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ extra\ energy\ usage\ in\ the\ current\ hour\ }}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (in\ case\ the\ pc\ reboots)}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ extra\ =\ 0;}
\DoxyCodeLine{00130\ \};}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
